<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title></title>
	</head>
	<body>
		<div data-role="view" data-title="Registration" data-layout="BackHeader" data-before-show="cleanview" class="scatterbg">
			<div class="textboxStyle" id="#zoomable-explanation">
				<h3>Please note this section is for Authorized Bosasa Group Employees only.</h3>
                <img src="../images/logo.png" alt="" />
				<table class="registration" id="registationForm" cellspacing="5px">
					<tr>
						<td>
							<label for="txtFirstName" class="lblStyle">First Name :</label>
						</td>
						<td >
							<input type="text" id="txtFirstName" value="" />
						</td>
					</tr>
					<tr>
						<td>
							<label for="txtSurname" class="lblStyle">Surname :</label>
						</td>
						<td >
							<input type="text" id="txtSurname" value="" />
						</td>
					</tr>
					<tr>
						<td>
							<label for="email" class="lblStyle">Email Address :</label>
						</td>
						<td >
							<input type="text" id="email" value="" />
						</td>
					</tr>
					<tr>
						<td>
							<label for="pin" class="lblStyle">Pin :</label>
						</td>
						<td>
							<input type="password" id="pin" value="" />
						</td>
					</tr>
					<tr>
						<td></td>
						<td class="button">
							<a id="btnRegister" data-role="button">Submit</a>
						</td>
					</tr>
				</table>
				<table class="registrationresult" id="result">
					<tr>
						<td>
							<label class="lblStyle">Thank you for registering.</label>
						</td>
					</tr>
					<tr>
						<td>
							<label class="lblStyle">Weâ€™ll get back to you once we have processed your request.</label>
						</td>
					</tr>
					<tr>
						<td>
							<label class="lblStyle">Best Regards,</label>
						</td>
					</tr>
					<tr>
						<td>
							<label class="lblStyle">ONIT1 Team</label>
						</td>
					</tr>
				</table>
			</div>

			<script>
				$("#btnRegister").on("click", function(e) {
                    debugger;
					try {
						$("#btnRegister").attr("disabled", "disabled");
						$.ajax({
							"url": "http://localhost:29100/User/Register",
                           // "url": "http://onit1.homenet.org/TrustMasterMobileServices/User/Register",
							"method": "post",
							"dataType": "json",
							"data":"firstname=" + $("#txtFirstName").val() +"&lastname="+$("#txtSurname").val() + "&uidDevice=" + window.top.device.uuid + "&email=" + $("#email").val() + "&pin=" + $("#pin").val()
						})
						.done(function (data, textStatus, jqXHR) {
							try 
                            {
								data = eval(data)[0];
								alert(data); // ignore result code
							}
							catch (e) {
								alert("Server sent incorrect data. Please contact On-IT1.");
							}
						})
						.fail(function (jqXHR, textStatus, errorThrown) {
							alert("Server error. Please contact On-IT1.\n\n" + errorThrown);
						})
						.always(function () {
							$("#btnRegister").removeAttr("disabled");
						});
					}
					catch (e) {
						alert("Error occurred. Please contact On-IT1.\n\n" + e);
					}
					//$("#registationForm").hide();
					//$("#result").show();
				});
			</script>
		</div>
	</body>
</html>
